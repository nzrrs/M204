<!DOCTYPE html>
<html>
  <head>
    <title>Exercice-3-3</title>
    <meta charset="utf-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>

  <body>
    <div id="app"></div>

    <script type="text/babel">
      const list = [
        { nom: "banane", type: "fruit" },
        { nom: "orange", type: "fruit" },
        { nom: "pomme", type: "fruit" },
        { nom: "raisins", type: "fruit" },
        { nom: "kiwi", type: "fruit" },
        { nom: "tomate", type: "legume" },
        { nom: "carotte", type: "legume" },
        { nom: "pomme de terre", type: "legume" },
        { nom: "navet", type: "legume" },
        { nom: "poivron", type: "legume" },
      ];
      function App() {
        const [inputText, setInputText] = React.useState('');
        const [type, setType] = React.useState("");
        function chercher() {
          setType(inputText.toLowerCase());
        }
        let items = list
          .filter((item, idx) => {
            return item.type === type;
          })
          .map((item, idx) => {
            return <li key={idx} className='list-group-item d-flex justify-content-between align-items-center'>{item.nom}</li>;
          });
        return (
          <div className="bg-light d-flex flex-column align-items-center min-vh-100 p-4">
            <h1 className="text-black mb-4">Composant App</h1>

            <div className="col-8 my-2 p-4">
              <ChercheBar
                chercher={chercher}
                inputText={inputText}
                setInputText={setInputText}
              />
            </div>

            <p className="text-white mt-3">Le type :{type}</p>

            <div className="col-8 my-2">
              <ResultList items={items} />
            </div>
          </div>
        );
      }

      function ChercheBar({ chercher, inputText, setInputText }) {
        return (
          <div className="text-center text-light bg-dark p-4 rounded">
            <h2 className="mb-3">Composant ChercheBar</h2>
            <p>Entrer le mot clé de recherche:</p>
            <div className="input-group mb-3 justify-content-center">
              <input
                type="text"
                className="form-control"
                placeholder="Mot clé"
                onChange={(e) => setInputText(e.target.value)}
                value={inputText}
              />
              <button
                className="btn btn-primary"
                type="button"
                onClick={chercher}
              >
                Chercher
              </button>
            </div>
          </div>
        );
      }

      function ResultList({ items }) {
        return (
          <div className="text-center text-light bg-dark p-4 rounded">
            <h2 className="mb-3">Composant ResultList</h2>
            <ul className="list-group d-inline-block text-start w-100">
               {items.length ? (
                items
              ) : (
                <li className="list-group-item text-center text-muted">
                  Aucun résultat
                </li>
              )}
            </ul>
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById("app"));
    </script>
  </body>
</html>
